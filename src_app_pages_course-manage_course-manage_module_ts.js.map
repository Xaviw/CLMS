{"version":3,"sources":["./src/app/pages/course-manage/course-card/course-card.component.ts","./src/app/pages/course-manage/course-card/course-card.component.html","./src/app/pages/course-manage/course-manage.component.ts","./src/app/pages/course-manage/course-manage.component.html","./src/app/pages/course-manage/course-manage.module.ts"],"names":[],"mappings":"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","file":"src_app_pages_course-manage_course-manage_module_ts.js","sourcesContent":["import { CourseManageService } from './../course-manage.service';\r\nimport { Component, Input, OnInit, Output, EventEmitter } from '@angular/core';\r\nimport { CourseCard } from '@app/shared/types/commonTypes';\r\nimport { CacheService } from '@app/core/services/cache.service';\r\n\r\n@Component({\r\n  selector: 'course-card',\r\n  templateUrl: './course-card.component.html',\r\n  styleUrls: ['./course-card.component.scss'],\r\n  providers: [CourseManageService],\r\n})\r\nexport class CourseCardComponent implements OnInit {\r\n  // 卡片信息\r\n  @Input() data!: CourseCard;\r\n  // 删除后刷新\r\n  @Output() delete: EventEmitter<any> = new EventEmitter();\r\n\r\n  constructor(private service: CourseManageService, public cache: CacheService) {}\r\n\r\n  ngOnInit() {}\r\n\r\n  deleteCourse() {\r\n    this.service.deleteCourse({ courseId: this.data.courseId }).subscribe((res) => {\r\n      this.delete.emit();\r\n    });\r\n  }\r\n}\r\n","<nz-card\r\n  style=\"width: 100%\"\r\n  [nzTitle]=\"data?.courseName\"\r\n  [nzExtra]=\"extraTemplate\"\r\n  [nzActions]=\"cache.functionPermissions('deleteCourse') ? [viewDetail, delete] : [viewDetail]\"\r\n  [nzBodyStyle]=\"{ padding: '10px 24px' }\"\r\n  nzHoverable\r\n>\r\n  <div class=\"flex-between\" style=\"line-height: 2.3\">\r\n    <span style=\"font-size: medium\">{{ data?.teacherName }}</span>\r\n    <span>共 {{ data?.count }} 节</span>\r\n  </div>\r\n  <div class=\"flex-between\">\r\n    <span nz-typography nzEllipsis>{{ data.isCompulsory ? data?.classes : data?.description }}</span>\r\n    <span style=\"flex-shrink: 0; margin-left: 10px\">第{{ data?.startWeek }}-{{ data?.endWeek }}周</span>\r\n  </div>\r\n</nz-card>\r\n<ng-template #extraTemplate>\r\n  <nz-tag nzColor=\"blue\" *ngIf=\"data?.isCompulsory === '是'\">必修</nz-tag>\r\n  <nz-tag nzColor=\"green\" *ngIf=\"data?.isCompulsory === '否'\">选修</nz-tag>\r\n</ng-template>\r\n<ng-template #viewDetail>\r\n  <button nz-button nzType=\"link\" nzSize=\"small\" [routerLink]=\"['/course-manage', data.courseId]\">查看详细</button>\r\n</ng-template>\r\n<ng-template #delete>\r\n  <button\r\n    nz-button\r\n    nzType=\"link\"\r\n    nzDanger\r\n    nzSize=\"small\"\r\n    nz-popconfirm\r\n    nzPopconfirmTitle=\"确认删除该课程?\"\r\n    (nzOnConfirm)=\"deleteCourse()\"\r\n    nzPopconfirmPlacement=\"bottom\"\r\n  >\r\n    删除课程\r\n  </button>\r\n</ng-template>\r\n","import { AddCourseComponent } from './../../shared/components/add-course/add-course.component';\r\nimport { CourseManageService } from './course-manage.service';\r\nimport { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { CourseCard, CourseAddInfo } from '@app/shared/types/commonTypes';\r\nimport { CacheService } from '@app/core/services/cache.service';\r\n\r\n@Component({\r\n  selector: 'course-manage',\r\n  templateUrl: './course-manage.component.html',\r\n  styleUrls: ['./course-manage.component.scss'],\r\n  providers: [CourseManageService],\r\n})\r\nexport class CourseManageComponent implements OnInit {\r\n  // 课程卡片信息\r\n  courseCardData: CourseCard[] = [];\r\n  // 请求参数缓存\r\n  param?: any;\r\n  // 添加课程抽屉\r\n  @ViewChild('addCourseEl') addCourseEl!: AddCourseComponent;\r\n\r\n  constructor(private service: CourseManageService, public cache: CacheService) {}\r\n\r\n  ngOnInit() {}\r\n\r\n  // 接收级联参数\r\n  getConditions(param: any) {\r\n    this.param = param;\r\n    if (['course', 'grade'].includes(param.code)) {\r\n      this.service\r\n        .getCourseCardByCascade({ code: param.data.course.id, grade: param.data.grade.id })\r\n        .subscribe((res) => {\r\n          this.courseCardData = res as CourseCard[];\r\n        });\r\n    } else if (param.code === 'myCourse') {\r\n      this.service.getCourseCardByMine({ code: param.data.myCourse.id }).subscribe((res) => {\r\n        this.courseCardData = res as CourseCard[];\r\n      });\r\n    } else if (param.code === 'courseUserSearch') {\r\n      this.service.getCourseCardBySearchTeacher({ keyword: param.data.courseUserSearch }).subscribe((res) => {\r\n        this.courseCardData = res as CourseCard[];\r\n      });\r\n    } else if (param.code === 'courseSearch') {\r\n      this.service.getCourseCardBySearchCourse({ keyword: param.data.courseSearch }).subscribe((res) => {\r\n        this.courseCardData = res as CourseCard[];\r\n      });\r\n    }\r\n  }\r\n\r\n  // 添加课程\r\n  addCourse(e: CourseAddInfo) {\r\n    this.service.addCourse(e).subscribe((res) => {\r\n      this.addCourseEl.reset();\r\n      this.addCourseEl.close();\r\n      this.refresh();\r\n    });\r\n  }\r\n\r\n  // 刷新\r\n  refresh() {\r\n    if (this.param) {\r\n      this.getConditions(this.param);\r\n    }\r\n  }\r\n}\r\n","<div class=\"view_scroll padding-y padding20-x\">\r\n  <cascade-condition\r\n    (cascadeEmitter)=\"getConditions($event)\"\r\n    [showFilter]=\"['grade', 'course', 'courseUserSearch', 'myCourse', 'courseSearch']\"\r\n  ></cascade-condition>\r\n  <div class=\"my10\">\r\n    <button nz-button nzType=\"primary\" (click)=\"addCourseEl.open()\" *ngIf=\"cache.functionPermissions('addCourse')\">\r\n      添加课程\r\n    </button>\r\n  </div>\r\n  <div class=\"card-area\" empty [emptyData]=\"courseCardData\" emptyInfo=\"暂无课程...\">\r\n    <course-card class=\"card\" *ngFor=\"let item of courseCardData\" [data]=\"item\" (delete)=\"refresh()\"></course-card>\r\n    <!-- 占位空标签，用于flex对齐 -->\r\n    <div class=\"card\"></div>\r\n    <div class=\"card\"></div>\r\n    <div class=\"card\"></div>\r\n    <div class=\"card\"></div>\r\n    <div class=\"card\"></div>\r\n    <div class=\"card\"></div>\r\n  </div>\r\n</div>\r\n\r\n<add-course #addCourseEl (operation)=\"addCourse($event)\" operationText=\"添加\"></add-course>\r\n","import { CourseCardComponent } from './course-card/course-card.component';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { SharedModule } from './../../shared/shared.module';\r\nimport { NgModule } from '@angular/core';\r\nimport { CourseManageComponent } from './course-manage.component';\r\n\r\nconst route: Routes = [\r\n  {\r\n    path: '',\r\n    component: CourseManageComponent,\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [SharedModule, RouterModule.forChild(route)],\r\n  declarations: [CourseManageComponent, CourseCardComponent],\r\n})\r\nexport class CourseManageModule {}\r\n"],"sourceRoot":"webpack:///"}